<div class='well '>

  <h1> Problem Set Editor </h1>

  <h3> Editing: {{problem.name}}</h3>

  <div class="form-group">
    <label for="numquestions"> Number of questions </label>
    <input type="text" class="form-control" id="numquestions" placeholder="0">
  </div>
  <div class="form-group">
    <label for="enablehints">Enable Hints</label>
    <input type="checkbox" class="form-control" id="enablehints" placeholder="0">
  </div>

</div>


<div class="well">

  <div class="form-group">
    <label for="name" class="col-sm-2 control-label">Name</label>
    <input type="text" id="name" class="form-control" ng-disabled="previewMode" ng-model="problem.name"/>
  </div>

  <div class="form-group">
    <label for="desc" class="col-sm-2 control-label">Description</label>
    <textarea id="desc" class="form-control" rows="3" ng-model="problem.desc"></textarea>
  </div>

  <div class="form-group">
    <label for="course" class="col-sm-2 control-label">Course</label>
    <select id="course" ng-model="selectedCourse">
      <option ng-repeat="c in courses" value="{{c.key.name}}">{{c.key.name}}
    </select>
  </div>


</div>

<div class="well" ng-init="init()">
  <h3>Questions</h3>

  <div class="add-field">
    <select ng-model="addField.new" ng-options="type.name as type.value for type in addField.types"></select>
    <button type="submit" class="btn" ng-click="addNewField()"><i class="icon-plus"></i> Add Question</button>
  </div>
  <hr>
  <p ng-show="problem.questions.length == 0">No questions added yet.</p>

  <div close-others="accordion.oneAtATime">
    <div heading="{{field.field_title}}" ng-repeat="field in problem.questions">

      <div class="accordion-edit">
        <button class="btn btn-danger pull-right" type="button" ng-click="deleteField(field.field_id)"><i
            class="icon-trash icon-white"></i> Delete
        </button>

        <textarea id="formula{{$index}}" class='mathdoxformula  mathdoxvisibletextarea' rows='10' cols='80'>{{field.field_formula}}</textarea>

        <div class="form-group">
          <button class="btn btn-default btn-sm" ng-click="checkCalculation($index)">Check Calculation</button>
          <label>Calculation Result:</label>
          <textarea disabled>{{calcResult[$index]}}</textarea>
        </div>
        <div class="form-group">
          <div class="span2">Question: {{field.field_id}} - {{field.field_type}}</div>
        </div>


        <div class="form-group">
          <div class="span2">Question Title:</div>
          <div class="span4"><input type="text" ng-model="field.field_title" value="{{field.field_title}}"></div>
          <input type="text" ng-model="field.field_answer" value="{{field.field_answer}}">
        </div>

        <div class="form-group">
          <div class="span2">Full Question:</div>
          <div class="span4">
            <textarea class="form-control" rows="3" ng-model="field.field_question"
                      value="{{field.field_question}}"></textarea>
          </div>
        </div>


        <div class="form-group">
          <div class="span2">Question Hint:</div>
          <div class="span4"><input type="text" ng-model="field.field_hint" value="{{field.field_hint}}"></div>
        </div>

        <div class="form-group" ng-show="showAddOptions(field)">
          <div class="span2">Question Options:</div>
          <div class="span6">
            <div ng-repeat="option in field.field_options">
              <input type="text" ng-model="option.option_title" value="{{option.option_title}}">
              <a class="btn btn-danger btn-mini right" type="button" ng-click="deleteOption(field, option)"><i
                  class="icon-minus icon-white"></i></a>
              <span class="label label-inverse">Value: {{ option.option_value }}</span>
            </div>
            <button class="btn btn-primary btn-small" type="button" ng-click="addOption(field)"><i
                class="icon-plus icon-white"></i> Add Option
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>

</div>

<p class="text-center">
  <button class="btn btn-primary right" type="button" ng-click="previewOn()">Preview
    Problem Set
  </button>
  <button class="btn btn-danger right" type="button" ng-click="reset()">Reset
  </button>

  <button class="btn btn-success" type="button" ng-click="saveSet(problem)">Save Problem Set</button>
</p>

<br>
<hr>
<a ng-show="!showJson" ng-click="showJson = true">Show form json object</a>
<a ng-show="showJson" ng-click="showJson = false">Hide form json object</a><br><br>
<div ng-show="showJson">
  <h4>Problem Set Object Content:</h4>
  <pre>{{ problem | json }}</pre>
</div>
</div>

<div class="form-fields-preview" ng-show="previewMode">
  <form-directive form="previewForm"></form-directive>

  <p class="text-center">
    <button class="btn btn-primary btn-large right" type="button" ng-click="previewOff()"><i
        class="icon-arrow-left icon-white"></i> Back to Create Mode
    </button>
  </p>
</div>
</div>

